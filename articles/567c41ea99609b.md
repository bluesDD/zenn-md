---
title: "Rubyã§Freezeã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆ"
emoji: "ğŸ‘"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [ruby, rails]
published: true
---

## ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªå®šæ•°ã‚’ä½œã‚Œã‚‹

Rubyã§ã¯ã€å®šæ•°ã¯ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ã€‚
freezeã‚’ä½¿ã†ã“ã¨ã§ã€ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªå®šæ•°ã‚’å®šç¾©ã§ãã‚‹ã€‚

```rb
FOO = "foo".freeze
```

## ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‰²ã‚Šå½“ã¦ã‚’æ¸›ã‚‰ã›ã‚‹

freezeã—ã¦ãŠãã“ã¨ã§ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒéƒ½åº¦ä½œã‚‰ã‚Œã‚‹ã“ã¨ã‚’é˜²ãã€Rubyã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é€Ÿåº¦ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚


freezeã—ã¦ã‚ã‚‹æ–‡å­—åˆ—ã¯ã€RubyãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦ãã‚Œã‚‹ãŸã‚ã€å®Ÿè¡Œéƒ½åº¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒä½œã‚‰ã‚Œã‚‹ã¨ã„ã£ãŸã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒãªããªã‚‹ã€‚

>Every time you do a method call like log("foobar"), you create a new String object.

ä¸‹è¨˜ã®ä¾‹ã§ã¯ã€50%ã‚‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‘ä¸Šã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã‚‹ã€‚

```rb
require 'benchmark/ips'

def noop(arg)
end

Benchmark.ips do |x|
  x.report("normal") { noop("foo") }
  x.report("frozen") { noop("foo".freeze)  }
end

# Results with MRI 2.2.2:
# Calculating -------------------------------------
#               normal   152.123k i/100ms
#               frozen   167.474k i/100ms
# -------------------------------------------------
#               normal      6.158M (Â± 3.3%) i/s -     30.881M
#               frozen      9.312M (Â± 3.5%) i/s -     46.558M
```

å‡ºå…¸ï¼š
When to use freeze and frozen? in Ruby - Honeybadger Developer Blog
https://www.honeybadger.io/blog/when-to-use-freeze-and-frozen-in-ruby/




## å‚è€ƒ

When to use freeze and frozen? in Ruby - Honeybadger Developer Blog
https://www.honeybadger.io/blog/when-to-use-freeze-and-frozen-in-ruby/
